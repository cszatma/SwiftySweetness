#!/bin/bash
RED='\033[0;31m'
GREEN='\033[0;32m'

get_tool() {
  grep -i "$1" Mintfile
}

check_status() {
  local exit_code=$?

  if [[ $exit_code -ne 0 ]]; then
    printf "${RED}$1 exited with code: $exit_code\n"
    exit 1
  else
    printf "${GREEN}Successfully ran $1\n"
    exit 0
  fi
}

swiftlint() {
  mint run swiftlint
  check_status swiftlint
}

swiftformat() {
  local tool=$(get_tool swiftformat)
  mint run $tool swiftformat .
  check_status swiftformat
}

case "$1" in
  "swiftlint") swiftlint ;;
  "swiftformat") swiftformat ;;
  *) printf "${RED}No such script: $1\n" ;;
esac
